@using System;
@using Sandbox;
@using Sandbox.UI;

@inherits Panel

<style>
    .a {
        left: 128px;
        top: 308px;
        justify-content: center;
        align-items: center;
        align-content: stretch;
        gap: 20px;
    }

    InputHint
    {
        height: 40px;
        img
        {
            margin-right: 8px;
            background-size: contain;
            background-repeat: no-repeat;
            height: 100%;
            width: 40px;
        }

        label {
            left: 0;
            font-family: Poppins;
            font-size: 28px;
            color: white;
            text-shadow: 0px 0px 2px rgba( black, 0.5 );
        }
    }
</style>

<root>
    <div class="a">
        <img @ref=Glyph />
        <label>@Action</label>
        <label>|</label>
        <label>@Input.GetButtonOrigin( Action )</label>
    </div>

</root>

@code
{
    // @ref
    public Image Glyph { get; set; }
    public GlyphStyle GlyphStyle { get; set; } = GlyphStyle.Light;
    public string Action => "Suicide";

    /// <summary>
    /// Checks the current button and updates the glyph.
    /// </summary>
    void UpdateTexture()
    {
        var texture = Input.GetGlyph( Action, InputGlyphSize.Medium, GlyphStyle );
        if ( texture is null ) return;
        Glyph.Texture = texture;
    }

    protected override void OnAfterTreeRender(bool firstTime)
    {
        UpdateTexture();
    }

    protected override int BuildHash()
    {
        // If we switch input device, rebuild the tree.
        return HashCode.Combine( Action, Input.UsingController );
    }
}